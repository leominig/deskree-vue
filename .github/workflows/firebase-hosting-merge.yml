# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Hosting on merge
'on':
  push:
    branches:
      - main
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Make envfile
        uses: SpicyPizza/create-envfile@v1.3
        with:
          envkey_VUE_APP_API_BASE_URL: "https://coffee-community.api.deskree.com/api/v1"
          envkey_VUE_APP_WEBFLOW_SITE_ID: "62d815e4cede9848f8b27b3b"
          envkey_VUE_APP_WEBFLOW_USERS_COLLECTION_ID: "62deb23eb02da508aadf9ffb"
          envkey_VUE_APP_WEBFLOW_RECIPES_COLLECTION_ID: "62dea942505ca144ab65c4a2"
          file_name: .env
          fail_on_empty: false
      - run: npm install && npm run build
      - uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: '${{ secrets.GITHUB_TOKEN }}'
          firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT_DESKREE_9A5C767E_827D_4F4B_A }}'
          channelId: live
          projectId: deskree-9a5c767e-827d-4f4b-a
